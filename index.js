(function () {function Wb(a){return a&&a.__esModule?{d:a.default}:{d:a}}function Xb(a){Object.defineProperty(a,"__esModule",{value:true})}function pb(e){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){return _b(e)||$b(e,t)||Zb(e,t)||Yb()}function Yb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zb(e,t){if(e){if("string"==typeof e)return qb(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qb(e,t):void 0}}function qb(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function $b(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,a,n,l,o=[],s=!0,u=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;s=!1}else for(;!(s=(r=n.call(i)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(d){u=!0,a=d}finally{try{if(!s&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}function _b(e){if(Array.isArray(e))return e}var Da={data:function(){return{previewFrameWindow:{},previewFrameDocument:{},previewHeight:0}},props:{markup:{type:String},styles:{type:String},script:{type:String},cssContent:{type:String},index:{type:Number}},mounted:function(){this.$root.$on("blockMoved",this.updateFrameIfEmpty),this.previewFrameWindow=this.$refs.previewFrame.contentWindow,this.previewFrameDocument=this.previewFrameWindow.document,this.updateContent();var e=document.createElement("script");if(e.type="text/javascript",e.innerHTML="\n      sendResizeEvent = function () {\n        if (window.frameElement) {\n          window.frameElement.dispatchEvent(new CustomEvent('sizechange', { detail: { height: document.documentElement.offsetHeight } }))\n        }\n      }\n      sendResizedEvent = function () {\n        console.log('on resize')\n      }\n    ",this.previewFrameDocument.getElementsByTagName("body")[0].appendChild(e),this.updateContent(),this.script){var t=document.createElement("script");t.type="text/javascript",t.innerHTML=this.script,this.previewFrameDocument.getElementsByTagName("body")[0].appendChild(t)}},methods:{updateContent:function(){var e=this;this.$nextTick().then(function(){e.$refs.previewFrame&&(e.previewFrameWindow=e.$refs.previewFrame.contentWindow,e.previewFrameDocument=e.previewFrameWindow.document,e.previewFrameDocument.open(),e.previewFrameDocument.write(e.$refs.previewFrameContent.innerHTML),e.previewFrameDocument.close(),e.resize())})},updateFrameIfEmpty:function(){var e=this;this.$nextTick().then(function(){e.$refs.previewFrame&&null===e.$refs.previewFrame.contentWindow.document.getElementById("kirby-builder-content")&&e.updateContent()})},onResize:function(e){this.resize()},resize:function(){if(this.previewFrameDocument.getElementById){var e=this.previewFrameDocument.getElementById("kirby-builder-body").scrollHeight;e>0&&(this.previewHeight=e)}},onFrameLoad:function(){this.resize()}},watch:{markup:function(e){this.updateContent()},styles:function(e){this.updateContent()},index:function(e){this.updateFrameIfEmpty()}}};if(typeof Da==="function"){Da=Da.options}Object.assign(Da,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"kBuilderPreview"},[_c("iframe",{ref:"previewFrame",staticClass:"kBuilderPreview__frame",style:{height:_vm.previewHeight+"px"},on:{"load":_vm.onFrameLoad,"sizechange":_vm.onResize}}),_vm._v(" "),_c("script",{ref:"previewFrameContent",attrs:{"type":"text/template"}},[_vm._v("\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Kirby Builder Preview</title>\n        <style>\n          html,body{margin: 0;padding: 0;}\n          "+_vm._s(_vm.styles)+"\n        </style>\n      </head>\n      <body id=\"kirby-builder-body\">\n        <div id=\"kirby-builder-content\">\n          "+_vm._s(_vm.markup)+"\n        </div>\n      </body>\n    </html>\n  ")])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:"data-v-490383",functional:undefined}}());var Ta,Ua={},a=arguments[0];!function(e,t){"object"==typeof Ua?Ua=t():"function"==typeof Ta&&Ta.amd?Ta(t):(e=e||self).Mustache=t()}(Ua,function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var a=/\S/;function s(e){return!function(e,t){return o.call(e,t)}(a,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var p=/\s*/,c=/\s+/,l=/\s*=/,h=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function v(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},v.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r);}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t,n,o,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,u,p,c=this,l=!1;c;){if(e.indexOf(".")>0)for(s=c.view,u=e.split("."),p=0;null!=s&&p<u.length;)p===u.length-1&&(l=i(s,u[p])||(n=s,o=u[p],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),s=s[u[p++]];else s=c.view[e],l=i(c.view,e);if(l){t=s;break}c=c.parent}a[e]=t}return r(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(e,r){var i=this.cache,o=e+":"+(r||w.tags).join(":"),a=i[o];return null==a&&(a=i[o]=function(e,r){if(!e)return[];var i,o,a,u=!1,d=[],g=[],y=[],$=!1,U=!1,b="",x=0;function k(){if($&&!U)for(;y.length;)delete g[y.pop()];else y=[];$=!1,U=!1}function m(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(n(e[0])+"\\s*"),o=new RegExp("\\s*"+n(e[1])),a=new RegExp("\\s*"+n("}"+e[1]))}m(r||w.tags);for(var E,j,T,Z,C,P,S=new v(e);!S.eos();){if(E=S.pos,T=S.scanUntil(i))for(var V=0,O=T.length;V<O;++V)s(Z=T.charAt(V))?(y.push(g.length),b+=Z):(U=!0,u=!0,b+=" "),g.push(["text",Z,E,E+1]),E+=1,"\n"===Z&&(k(),b="",x=0,u=!1);if(!S.scan(i))break;if($=!0,j=S.scan(f)||"name",S.scan(p),"="===j?(T=S.scanUntil(l),S.scan(l),S.scanUntil(o)):"{"===j?(T=S.scanUntil(a),S.scan(h),S.scanUntil(o),j="&"):T=S.scanUntil(o),!S.scan(o))throw new Error("Unclosed tag at "+S.pos);if(C=">"==j?[j,T,E,S.pos,b,x,u]:[j,T,E,S.pos],x++,g.push(C),"#"===j||"^"===j)d.push(C);else if("/"===j){if(!(P=d.pop()))throw new Error("Unopened section \""+T+"\" at "+E);if(P[1]!==T)throw new Error("Unclosed section \""+P[1]+"\" at "+E)}else"name"===j||"{"===j||"&"===j?U=!0:"="===j&&m(T)}if(k(),P=d.pop())throw new Error("Unclosed section \""+P[1]+"\" at "+S.pos);return function(e){for(var t,r=[],n=r,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":n.push(t),i.push(t),n=t[4]=[];break;case"/":i.pop()[5]=t[2],n=i.length>0?i[i.length-1][4]:r;break;default:n.push(t);}return r}(function(e){for(var t,r,n=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(g))}(e,r)),a},g.prototype.render=function(e,t,r,n){var i=this.parse(e,n),o=t instanceof d?t:new d(t,void 0);return this.renderTokens(i,o,r,e,n)},g.prototype.renderTokens=function(e,t,r,n,i){for(var o,a,s,u="",p=0,c=e.length;p<c;++p)s=void 0,"#"===(a=(o=e[p])[0])?s=this.renderSection(o,t,r,n):"^"===a?s=this.renderInverted(o,t,r,n):">"===a?s=this.renderPartial(o,t,r,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(u+=s);return u},g.prototype.renderSection=function(e,n,i,o){var a=this,s="",u=n.lookup(e[1]);if(u){if(t(u))for(var p=0,c=u.length;p<c;++p)s+=this.renderTokens(e[4],n.push(u[p]),i,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],n.push(u),i,o);else if(r(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(n.view,o.slice(e[3],e[5]),function(e){return a.render(e,n,i)}))&&(s+=u)}else s+=this.renderTokens(e[4],n,i,o);return s}},g.prototype.renderInverted=function(e,r,n,i){var o=r.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],r,n,i)},g.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!r)&&(i[o]=n+i[o]);return i.join("\n")},g.prototype.renderPartial=function(e,t,n,i){if(n){var o=r(n)?n(e[1]):n[e[1]];if(null!=o){var a=e[6],s=e[5],u=e[4],p=o;return 0==s&&u&&(p=this.indentPartial(o,u,a)),this.renderTokens(this.parse(p,i),t,n,p)}}},g.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},g.prototype.escapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return w.escape(r)},g.prototype.rawValue=function(e){return e[1]};var w={name:"mustache.js",version:"3.2.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,to_html:void 0,Scanner:void 0,Context:void 0,Writer:void 0},y=new g;return w.clearCache=function(){return y.clearCache()},w.parse=function(e,t){return y.parse(e,t)},w.render=function(e,r,n,i){if("string"!=typeof e)throw new TypeError("Invalid template! Template should be a \"string\" but \""+(t(o=e)?"array":typeof o)+"\" was given as the first argument for mustache#render(template, view, partials)");var o;return y.render(e,r,n,i)},w.to_html=function(e,t,n,i){var o=w.render(e,t,n);if(!r(i))return o;i(o)},w.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return u[e]})},w.Scanner=v,w.Context=d,w.Writer=g,w});var Ea={props:{endpoints:Object,value:Object,blockConfig:Object,fieldGroup:Object,readyFieldGroup:Object,index:Number,label:String,columnsCount:Number,pageUid:String,pageId:String,encodedPageId:String,script:String,parentPath:String,canDuplicate:Boolean,cssContent:String},data:function(){return{pending:!0,activeTab:null,expanded:!0,isNew:!1,previewFrameContent:null,previewHeight:0,previewStored:!1,previewMarkup:"",showPreview:!1,fieldGroup:{},styles:null}},components:{BuilderPreview:Da},mounted:function(){this.value._uid||(this.value._uid=this.value._key+"_"+new Date().valueOf()+"_"+this._uid),null!=this.blockConfig.expandedInitially&&(this.expanded=this.blockConfig.expandedInitially,delete this.blockConfig.expandedInitially),this.blockConfig.showPreviewInitially&&(this.showPreview=this.blockConfig.showPreviewInitially,delete this.blockConfig.showPreviewInitially);var e=JSON.parse(localStorage.getItem(this.localUiStateKey));e&&null!==e.expanded&&(this.expanded=e.expanded),this.initFieldGroup()},computed:{localUiStateKey:function(){return"kBuilder.uiState.".concat(this.value._uid)},localFormGroupKey:function(){return"kBuilder.formGroup.".concat(this.blueprint)},extendedUid:function(){return this.pageId.replace("/","-")+"-"+this._uid},blockPath:function(){return this.parentPath+"+"+this.value._key},fieldSets:function(){var e=[];if(this.fieldGroup.tabs)for(var t=0,i=Object.entries(this.fieldGroup.tabs);t<i.length;t++){var r=Ca(i[t],2),a=r[0],n=r[1];e.push(this.newFieldSet(n,a,this.value))}else this.fieldGroup.fields&&e.push(this.newFieldSet(this.fieldGroup,"content",this.value,"edit",this.$t("edit")));return e}},methods:{title:function(e){var $gZU7$$interop$default=Wb(Ua);return $gZU7$$interop$default.d.render(this.label,e)},initFieldGroup:function(){var e=this,t=JSON.parse(localStorage.getItem(this.localUiStateKey));Object.keys(this.value).length<=2&&(this.fieldGroup.fields&&Object.entries(this.fieldGroup.fields).forEach(function(t){var i=Ca(t,2),r=i[0],a=i[1];e.$set(e.value,r,a.default)}),this.fieldGroup.tabs&&Object.entries(this.fieldGroup.tabs).forEach(function(t){var i=Ca(t,2),r=(i[0],i[1]);Object.entries(r.fields).forEach(function(t){var i=Ca(t,2),r=i[0],a=i[1];e.$set(e.value,r,a.default)})})),this.activeTab||(this.activeTab=this.fieldSets[0].key),this.fieldGroup.defaultView&&"default"!=this.fieldGroup.defaultView&&!this.isNew?"preview"==this.fieldGroup.defaultView?this.showPreview=!0:this.activeTab=this.fieldGroup.defaultView:t?(this.showPreview=t.showPreview,this.activeTab=t.activeTab):this.storeLocalUiState(),this.fieldGroup.preview&&this.showPreview&&this.expanded&&this.displayPreview(this.fieldGroup.preview)},onBlockInput:function(e){this.$emit("input",this.value)},displayPreview:function(){var e=this;this.showPreview=!0,this.expanded=!0;var t={preview:this.fieldGroup.preview,blockContent:this.value,block:this.fieldGroup,blockUid:this.extendedUid,pageid:this.pageId};this.$api.post("kirby-builder/rendered-preview",t).then(function(t){e.previewMarkup=t.preview,e.activeTab=null,e.$refs.preview.resize()}),this.storeLocalUiState()},displayFieldSet:function(e){this.showPreview=!1,this.activeTab=e,this.previewHeight=0,this.storeLocalUiState()},toggleExpand:function(e){this.expanded="boolean"==typeof e?e:!this.expanded,this.expanded&&this.showPreview&&this.displayPreview(),this.storeLocalUiState()},newFieldSet:function(e,t,i,r,a){var n=this;Object.keys(e.fields).forEach(function(t){var i=n.endpoints.model;e.fields[t].endpoints={field:"kirby-builder/".concat(i,"/fields/").concat(n.blockPath,"+").concat(e.fields[t].name),model:i,section:n.endpoints.section},e.fields[t].parentPath=n.blockPath});var l={fields:e.fields,key:t,model:i,icon:r||e.icon||null,label:a||e.label||null};return l},objectToGetParams:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},storeLocalUiState:function(){var e={expanded:this.expanded,showPreview:this.showPreview,activeTab:this.activeTab};localStorage.setItem(this.localUiStateKey,JSON.stringify(e))},tabIcon:function(e){return e?e.indexOf("/")>-1&&e.indexOf(".")>-1?null:e:null},tabImage:function(e){return e&&e.indexOf("/")>-1&&e.indexOf(".")>-1?e:null}}};if(typeof Ea==="function"){Ea=Ea.options}Object.assign(Ea,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{class:["kBuilderBlock","kBuilderBlock--col-"+_vm.columnsCount,"kBuilderBlock--type-"+_vm.value._key,{"kBuilderBlock--previewMode":_vm.showPreview&&_vm.expanded},{"kBuilderBlock--expanded":_vm.expanded},{"kBuilderBlock--pending":_vm.isNew},{"kBuilderBlock--collapsed":!_vm.expanded},{"kBuilderBlock--editMode":!_vm.showPreview&&_vm.expanded}]},[_c("div",{class:"kBuilderBlock__header kBuilderBlock__header--col-"+_vm.columnsCount},[_c("k-icon",{class:"kBuilder__dragDropHandle kBuilder__dragDropHandle--col-"+_vm.columnsCount,attrs:{"type":"sort"}}),_vm._v(" "),_c("span",{staticClass:"kBuilderBlock__label",on:{"click":_vm.toggleExpand}},[_c("k-icon",{staticClass:"kBuilderBlock__expandedIcon",class:{"kBuilderBlock__expandedIcon--expanded":_vm.expanded},attrs:{"type":"angle-down"}}),_vm._v(" "),_c("span",{domProps:{"innerHTML":_vm._s(_vm.title(_vm.value))}})],1),_vm._v(" "),_c("div",{staticClass:"kBuilderBlock__actions"},[_c("k-button-group",{staticClass:"kBuilderBlock__actionsGroup"},[_vm._l(_vm.fieldSets,function(fieldSet){return _vm.fieldSets.length>1||_vm.fieldGroup.preview?_c("k-button",{key:"showFierldSetButton-"+_vm._uid+fieldSet.key,staticClass:"kBuilderBlock__actionsButton",class:[{"kBuilderBlock__actionsButton--active":_vm.activeTab==fieldSet.key&&_vm.expanded},"kBuilderBlock__actionsButton--type-"+fieldSet.key],attrs:{"icon":_vm.tabIcon(fieldSet.icon),"image":_vm.tabImage(fieldSet.icon)},on:{"click":function($event){_vm.displayFieldSet(fieldSet.key);_vm.toggleExpand(true)}}},[_vm._v(_vm._s(fieldSet.label))]):_vm._e()}),_vm._v(" "),_vm.fieldGroup.preview?_c("k-button",{staticClass:"kBuilderBlock__actionsButton kBuilderBlock__actionsButton--preview",class:{"kBuilderBlock__actionsButton--active":_vm.showPreview&&_vm.expanded},attrs:{"icon":"preview"},on:{"click":function($event){return _vm.displayPreview()}}},[_vm._v(_vm._s(_vm.$t("builder.preview")))]):_vm._e()],2),_vm._v(" "),_c("div",{staticClass:"kBuilderBlock__control"},[_c("k-dropdown",{staticClass:"kBuilderBlock__actionsDropDown"},[_c("k-button",{staticClass:"kBuilderBlock__actionsButton",attrs:{"icon":"dots"},on:{"click":function($event){return _vm.$refs["blockActions"].toggle()}}}),_vm._v(" "),_c("k-dropdown-content",{ref:"blockActions",staticClass:"kBuilderBlock__actionsDropDownContent",attrs:{"align":"right"}},[_vm.canDuplicate?_c("k-dropdown-item",{attrs:{"icon":"copy"},on:{"click":function($event){return _vm.$emit("clone",_vm.index,_vm.showPreview,_vm.expanded,_vm.activeTab)}}},[_vm._v(_vm._s(_vm.$t("builder.clone")))]):_vm._e(),_vm._v(" "),_c("k-dropdown-item",{attrs:{"icon":"trash"},on:{"click":function($event){return _vm.$emit("delete",_vm.index)}}},[_vm._v(_vm._s(_vm.$t("delete")))])],1)],1)],1)],1)],1),_vm._v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.expanded,expression:"expanded"}],staticClass:"kBuilderBlock__content"},[_vm.fieldGroup.preview?_c("builder-preview",{directives:[{name:"show",rawName:"v-show",value:_vm.showPreview,expression:"showPreview"}],ref:"preview",attrs:{"markup":_vm.previewMarkup,"styles":_vm.cssContent,"index":_vm.index,"script":_vm.script}}):_vm._e(),_vm._v(" "),_vm._l(_vm.fieldSets,function(fieldSet){return _vm.activeTab===fieldSet.key?_c("k-fieldset",_vm._g({directives:[{name:"show",rawName:"v-show",value:!_vm.showPreview,expression:"!showPreview"}],key:fieldSet.key+_vm._uid,staticClass:"kBuilderBlock__form",attrs:{"value":{},"fields":fieldSet.fields,"validate":false},model:{value:fieldSet.model,callback:function($$v){_vm.$set(fieldSet,"model",$$v)},expression:"fieldSet.model"}},_vm.$listeners)):_vm._e()})],2)])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var ac,Va,b=arguments[0],Fa={};var ta,bc,ka,wa,rb,Wa,sb,cc,tb,ub,vb,aa,xa,Xa,ya,ca,q,da,G,W,za,wb,X,Ya,Ga,na,Za,$a,xb,ea,Aa,la,dc,ec,fc,gc,_a,yb,ab,bb,ga,cb,hc,Ha,zb,Ab,Bb,ic,Ia,Ja,Ka,Cb,jc,Db,Eb,kc,lc,Fb,Gb,Hb,ua,mc,Ib,nc,oc,pc,Jb,db,Y,qc,oa,eb,Kb,fb,pa,L,La,Lb,F,fa,Mb,qa,Ma,rc=false;function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tc(t,$,e){return $ in t?Object.defineProperty(t,$,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[$]=e,t}function ia(){return(ia=Object.assign||function(t){for(var $=1;$<arguments.length;$++){var e=arguments[$];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function ra(t){for(var $=1;$<arguments.length;$++){var e=null!=arguments[$]?arguments[$]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function($){tc(t,$,e[$])})}return t}function uc(t,$){if(null==t)return{};var e,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],$.indexOf(e)>=0||(a[e]=t[e]);return a}function vc(t,$){if(null==t)return{};var e,r,a=uc(t,$);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],$.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function wc(t){return xc(t)||yc(t)||zc()}function xc(t){if(Array.isArray(t)){for(var $=0,e=new Array(t.length);$<t.length;$++)e[$]=t[$];return e}}function yc(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function zc(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ma(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}function K(t,$,e){t.addEventListener($,e,!ka&&tb)}function J(t,$,e){t.removeEventListener($,e,!ka&&tb)}function Na(t,$){if($){if(">"===$[0]&&($=$.substring(1)),t)try{if(t.matches)return t.matches($);if(t.msMatchesSelector)return t.msMatchesSelector($);if(t.webkitMatchesSelector)return t.webkitMatchesSelector($)}catch(e){return!1}return!1}}function Ac(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ha(t,$,e,r){if(t){e=e||document;do{if(null!=$&&(">"===$[0]?t.parentNode===e&&Na(t,$):Na(t,$))||r&&t===e)return t;if(t===e)break}while(t=Ac(t))}return null}function N(t,$,e){if(t&&$)if(t.classList)t.classList[e?"add":"remove"]($);else{var r=(" "+t.className+" ").replace(vb," ").replace(" "+$+" "," ");t.className=(r+(e?" "+$:"")).replace(vb," ")}}function z(t,$,e){var r=t&&t.style;if(r){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(e=t.currentStyle),void 0===$?e:e[$];$ in r||-1!==$.indexOf("webkit")||($="-webkit-"+$),r[$]=e+("string"==typeof e?"":"px")}}function va(t,$){var e="";if("string"==typeof t)e=t;else do{var r=z(t,"transform");r&&"none"!==r&&(e=r+" "+e)}while(!$&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(e)}function Nb(t,$,e){if(t){var r=t.getElementsByTagName($),a=0,o=r.length;if(e)for(;a<o;a++)e(r[a],a);return r}return[]}function ja(){var t=document.scrollingElement;return t||document.documentElement}function Q(t,$,e,r,a){if(t.getBoundingClientRect||t===window){var o,n,l,i,s,v,I;if(t!==window&&t!==ja()?(n=(o=t.getBoundingClientRect()).top,l=o.left,i=o.bottom,s=o.right,v=o.height,I=o.width):(n=0,l=0,i=window.innerHeight,s=window.innerWidth,v=window.innerHeight,I=window.innerWidth),($||e)&&t!==window&&(a=a||t.parentNode,!ka))do{if(a&&a.getBoundingClientRect&&("none"!==z(a,"transform")||e&&"static"!==z(a,"position"))){var c=a.getBoundingClientRect();n-=c.top+parseInt(z(a,"border-top-width")),l-=c.left+parseInt(z(a,"border-left-width")),i=n+o.height,s=l+o.width;break}}while(a=a.parentNode);if(r&&t!==window){var H=va(a||t),d=H&&H.a,u=H&&H.d;H&&(i=(n/=u)+(v/=u),s=(l/=d)+(I/=d))}return{top:n,left:l,bottom:i,right:s,width:I,height:v}}}function Ob(t,$,e){for(var r=sa(t,!0),a=Q(t)[$];r;){var o=Q(r)[e];if(!("top"===e||"left"===e?a>=o:a<=o))return r;if(r===ja())break;r=sa(r,!1)}return!1}function Oa(t,$,e){for(var r=0,a=0,o=t.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==B.ghost&&o[a]!==B.dragged&&ha(o[a],e.draggable,t,!1)){if(r===$)return o[a];r++}a++}return null}function gb(t,$){for(var e=t.lastElementChild;e&&(e===B.ghost||"none"===z(e,"display")||$&&!Na(e,$));)e=e.previousElementSibling;return e||null}function R(t,$){var e=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===B.clone||$&&!Na(t,$)||e++;return e}function Pb(t){var $=0,e=0,r=ja();if(t)do{var a=va(t),o=a.a,n=a.d;$+=t.scrollLeft*o,e+=t.scrollTop*n}while(t!==r&&(t=t.parentNode));return[$,e]}function Bc(t,$){for(var e in t)if(t.hasOwnProperty(e))for(var r in $)if($.hasOwnProperty(r)&&$[r]===t[e][r])return Number(e);return-1}function sa(t,$){if(!t||!t.getBoundingClientRect)return ja();var e=t,r=!1;do{if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var a=z(e);if(e.clientWidth<e.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||e.clientHeight<e.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!e.getBoundingClientRect||e===document.body)return ja();if(r||$)return e;r=!0}}}while(e=e.parentNode);return ja()}function Cc(t,$){if(t&&$)for(var e in $)$.hasOwnProperty(e)&&(t[e]=$[e]);return t}function hb(t,$){return Math.round(t.top)===Math.round($.top)&&Math.round(t.left)===Math.round($.left)&&Math.round(t.height)===Math.round($.height)&&Math.round(t.width)===Math.round($.width)}function Qb(t,$){return function(){if(!ub){var e=arguments;1===e.length?t.call(this,e[0]):t.apply(this,e),ub=setTimeout(function(){ub=void 0},$)}}}function Dc(){clearTimeout(ub),ub=void 0}function Rb(t,$,e){t.scrollLeft+=$,t.scrollTop+=e}function ib(t){var $=window.Polymer,e=window.jQuery||window.Zepto;return $&&$.dom?$.dom(t).cloneNode(!0):e?e(t).clone(!0)[0]:t.cloneNode(!0)}function Sb(t,$){z(t,"position","absolute"),z(t,"top",$.top),z(t,"left",$.left),z(t,"width",$.width),z(t,"height",$.height)}function jb(t){z(t,"position",""),z(t,"top",""),z(t,"left",""),z(t,"width",""),z(t,"height","")}function Ec(){var t,$=[];return{captureAnimationState:function(){($=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(t){if("none"!==z(t,"display")&&t!==B.ghost){$.push({target:t,rect:Q(t)});var e=ra({},$[$.length-1].rect);if(t.thisAnimationDuration){var r=va(t,!0);r&&(e.top-=r.f,e.left-=r.e)}t.fromRect=e}})},addAnimationState:function(t){$.push(t)},removeAnimationState:function(t){$.splice(Bc($,{target:t}),1)},animateAll:function(e){var r=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof e&&e());var a=!1,o=0;$.forEach(function(t){var $=0,e=t.target,n=e.fromRect,l=Q(e),i=e.prevFromRect,s=e.prevToRect,v=t.rect,I=va(e,!0);I&&(l.top-=I.f,l.left-=I.e),e.toRect=l,e.thisAnimationDuration&&hb(i,l)&&!hb(n,l)&&(v.top-l.top)/(v.left-l.left)==(n.top-l.top)/(n.left-l.left)&&($=Gc(v,i,s,r.options)),hb(l,n)||(e.prevFromRect=n,e.prevToRect=l,$||($=r.options.animation),r.animate(e,v,l,$)),$&&(a=!0,o=Math.max(o,$),clearTimeout(e.animationResetTimer),e.animationResetTimer=setTimeout(function(){e.animationTime=0,e.prevFromRect=null,e.fromRect=null,e.prevToRect=null,e.thisAnimationDuration=null},$),e.thisAnimationDuration=$)}),clearTimeout(t),a?t=setTimeout(function(){"function"==typeof e&&e()},o):"function"==typeof e&&e(),$=[]},animate:function(t,$,e,r){if(r){z(t,"transition",""),z(t,"transform","");var a=va(this.el),o=a&&a.a,n=a&&a.d,l=($.left-e.left)/(o||1),i=($.top-e.top)/(n||1);t.animatingX=!!l,t.animatingY=!!i,z(t,"transform","translate3d("+l+"px,"+i+"px,0)"),Fc(t),z(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),z(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){z(t,"transition",""),z(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},r)}}}}function Fc(t){return t.offsetWidth}function Gc(t,$,e,r){return Math.sqrt(Math.pow($.top-t.top,2)+Math.pow($.left-t.left,2))/Math.sqrt(Math.pow($.top-e.top,2)+Math.pow($.left-e.left,2))*r.animation}function Ba(t){var $=t.sortable,e=t.rootEl,r=t.name,a=t.targetEl,o=t.cloneEl,n=t.toEl,l=t.fromEl,i=t.oldIndex,s=t.newIndex,v=t.oldDraggableIndex,I=t.newDraggableIndex,c=t.originalEvent,H=t.putSortable,d=t.extraEventProperties;if($=$||e&&e[aa]){var u,g=$.options,h="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||ka||wa?(u=document.createEvent("Event")).initEvent(r,!0,!0):u=new CustomEvent(r,{bubbles:!0,cancelable:!0}),u.to=n||e,u.from=l||e,u.item=a||e,u.clone=o,u.oldIndex=i,u.newIndex=s,u.oldDraggableIndex=v,u.newDraggableIndex=I,u.originalEvent=c,u.pullMode=H?H.lastPutMode:void 0;var p=ra({},d,ya.getEventProperties(r,$));for(var f in p)u[f]=p[f];e&&e.dispatchEvent(u),g[h]&&g[h].call($,u)}}function ba(t){Ba(ra({putSortable:ea,cloneEl:X,targetEl:q,rootEl:W,oldIndex:Ga,oldDraggableIndex:Za,newIndex:na,newDraggableIndex:$a},t))}function B(t,$){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=$=ia({},$),t[aa]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Eb(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,$){t.setData("Text",$.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==B.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in ya.initializePlugins(this,t,e),e)!(r in $)&&($[r]=e[r]);for(var a in Fb($),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!$.forceFallback&&jc,this.nativeDraggable&&(this.options.touchStartThreshold=1),$.supportPointer?K(t,"pointerdown",this._onTapStart):(K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),Ha.push(this.el),$.store&&$.store.get&&this.sort($.store.get(this)||[]),ia(this,Ec())}function Hc(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function kb(t,$,e,r,a,o,n,l){var i,s,v=t[aa],I=v.options.onMove;return!window.CustomEvent||ka||wa?(i=document.createEvent("Event")).initEvent("move",!0,!0):i=new CustomEvent("move",{bubbles:!0,cancelable:!0}),i.to=$,i.from=t,i.dragged=e,i.draggedRect=r,i.related=a||$,i.relatedRect=o||Q($),i.willInsertAfter=l,i.originalEvent=n,t.dispatchEvent(i),I&&(s=I.call(v,i,n)),s}function lb(t){t.draggable=!1}function Ic(){ic=!1}function Jc(t,$,e){var r=Q(gb(e.el,e.options.draggable));return $?t.clientX>r.right+10||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+10}function Kc(t,$,e,r,a,o,n,l){var i=r?t.clientY:t.clientX,s=r?e.height:e.width,v=r?e.top:e.left,I=r?e.bottom:e.right,c=!1;if(!n)if(l&&bb<s*a){if(!zb&&(1===ab?i>v+s*o/2:i<I-s*o/2)&&(zb=!0),zb)c=!0;else if(1===ab?i<v+bb:i>I-bb)return-ab}else if(i>v+s*(1-a)/2&&i<I-s*(1-a)/2)return Lc($);return(c=c||n)&&(i<v+s*o/2||i>I-s*o/2)?i>v+s/2?1:-1:0}function Lc(t){return R(q)<R(t)?1:-1}function Mc(t){for(var $=t.tagName+t.className+t.src+t.href+t.textContent,e=$.length,r=0;e--;)r+=$.charCodeAt(e);return r.toString(36)}function Nc(t){Ia.length=0;for(var $=t.getElementsByTagName("input"),e=$.length;e--;){var r=$[e];r.checked&&Ia.push(r)}}function Pa(t){return setTimeout(t,0)}function mb(t){return clearTimeout(t)}function Oc(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var $=t.originalEvent;this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):this.options.supportPointer?K(document,"pointermove",this._handleFallbackAutoScroll):$.touches?K(document,"touchmove",this._handleFallbackAutoScroll):K(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var $=t.originalEvent;this.options.dragOverBubble||$.rootEl||this._handleAutoScroll($)},drop:function(){this.sortable.nativeDraggable?J(document,"dragover",this._handleAutoScroll):(J(document,"pointermove",this._handleFallbackAutoScroll),J(document,"touchmove",this._handleFallbackAutoScroll),J(document,"mousemove",this._handleFallbackAutoScroll)),Tb(),Qa(),Dc()},nulling:function(){Jb=nc=Ib=qc=db=oc=pc=null,Y.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,$){var e=this,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(r,a);if(Jb=t,$||wa||ka||Wa){eb(t,this.options,o,$);var n=sa(o,!0);!qc||db&&r===oc&&a===pc||(db&&Tb(),db=setInterval(function(){var o=sa(document.elementFromPoint(r,a),!0);o!==n&&(n=o,Qa()),eb(t,e.options,o,$)},10),oc=r,pc=a)}else{if(!this.options.bubbleScroll||sa(o,!0)===ja())return void Qa();eb(t,this.options,sa(o,!1),!1)}}},ia(t,{pluginName:"scroll",initializeByDefault:!0})}function Qa(){Y.forEach(function(t){clearInterval(t.pid)}),Y=[]}function Tb(){clearInterval(db)}function nb(){}function ob(){}function Pc(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var $=t.dragEl;oa=$},dragOverValid:function(t){var $=t.completed,e=t.target,r=t.onMove,a=t.activeSortable,o=t.changed,n=t.cancel;if(a.options.swap){var l=this.sortable.el,i=this.options;if(e&&e!==l){var s=oa;!1!==r(e)?(N(e,i.swapClass,!0),oa=e):oa=null,s&&s!==oa&&N(s,i.swapClass,!1)}o(),$(!0),n()}},drop:function(t){var $=t.activeSortable,e=t.putSortable,r=t.dragEl,a=e||this.sortable,o=this.options;oa&&N(oa,o.swapClass,!1),oa&&(o.swap||e&&e.options.swap)&&r!==oa&&(a.captureAnimationState(),a!==$&&$.captureAnimationState(),Qc(r,oa),a.animateAll(),a!==$&&$.animateAll())},nulling:function(){oa=null}},ia(t,{pluginName:"swap",eventProperties:function(){return{swapItem:oa}}})}function Qc(t,$){var e,r,a=t.parentNode,o=$.parentNode;a&&o&&!a.isEqualNode($)&&!o.isEqualNode(t)&&(e=R(t),r=R($),a.isEqualNode(o)&&e<r&&r++,a.insertBefore($,a.children[e]),o.insertBefore(t,o.children[r]))}function Rc(){function t(t){for(var $ in this)"_"===$.charAt(0)&&"function"==typeof this[$]&&(this[$]=this[$].bind(this));t.options.supportPointer?K(document,"pointerup",this._deselectMultiDrag):(K(document,"mouseup",this._deselectMultiDrag),K(document,"touchend",this._deselectMultiDrag)),K(document,"keydown",this._checkKeyDown),K(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function($,e){var r="";F.length&&pa===t?F.forEach(function(t,$){r+=($?", ":"")+t.textContent}):r=e.textContent,$.setData("Text",r)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var $=t.dragEl;L=$},delayEnded:function(){this.isMultiDrag=~F.indexOf(L)},setupClone:function(t){var $=t.sortable,e=t.cancel;if(this.isMultiDrag){for(var r=0;r<F.length;r++)fa.push(ib(F[r])),fa[r].sortableIndex=F[r].sortableIndex,fa[r].draggable=!1,fa[r].style["will-change"]="",N(fa[r],this.options.selectedClass,!1),F[r]===L&&N(fa[r],this.options.chosenClass,!1);$._hideClone(),e()}},clone:function(t){var $=t.sortable,e=t.rootEl,r=t.dispatchSortableEvent,a=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||F.length&&pa===$&&(Ub(!0,e),r("clone"),a()))},showClone:function(t){var $=t.cloneNowShown,e=t.rootEl,r=t.cancel;this.isMultiDrag&&(Ub(!1,e),fa.forEach(function(t){z(t,"display","")}),$(),Lb=!1,r())},hideClone:function(t){var $=this,e=(t.sortable,t.cloneNowHidden),r=t.cancel;this.isMultiDrag&&(fa.forEach(function(t){z(t,"display","none"),$.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),e(),Lb=!0,r())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&pa&&pa.multiDrag._deselectMultiDrag(),F.forEach(function(t){t.sortableIndex=R(t)}),F=F.sort(function(t,$){return t.sortableIndex-$.sortableIndex}),Ma=!0},dragStarted:function(t){var $=this,e=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(e.captureAnimationState(),this.options.animation)){F.forEach(function(t){t!==L&&z(t,"position","absolute")});var r=Q(L,!1,!0,!0);F.forEach(function(t){t!==L&&Sb(t,r)}),qa=!0,Mb=!0}e.animateAll(function(){qa=!1,Mb=!1,$.options.animation&&F.forEach(function(t){jb(t)}),$.options.sort&&Ra()})}},dragOver:function(t){var $=t.target,e=t.completed,r=t.cancel;qa&&~F.indexOf($)&&(e(!1),r())},revert:function(t){var $=t.fromSortable,e=t.rootEl,r=t.sortable,a=t.dragRect;F.length>1&&(F.forEach(function(t){r.addAnimationState({target:t,rect:qa?Q(t):a}),jb(t),t.fromRect=a,$.removeAnimationState(t)}),qa=!1,Sc(!this.options.removeCloneOnHide,e))},dragOverCompleted:function(t){var $=t.sortable,e=t.isOwner,r=t.insertion,a=t.activeSortable,o=t.parentEl,n=t.putSortable,l=this.options;if(r){if(e&&a._hideClone(),Mb=!1,l.animation&&F.length>1&&(qa||!e&&!a.options.sort&&!n)){var i=Q(L,!1,!0,!0);F.forEach(function(t){t!==L&&(Sb(t,i),o.appendChild(t))}),qa=!0}if(!e)if(qa||Ra(),F.length>1){var s=Lb;a._showClone($),a.options.animation&&!Lb&&s&&fa.forEach(function(t){a.addAnimationState({target:t,rect:La}),t.fromRect=La,t.thisAnimationDuration=null})}else a._showClone($)}},dragOverAnimationCapture:function(t){var $=t.dragRect,e=t.isOwner,r=t.activeSortable;if(F.forEach(function(t){t.thisAnimationDuration=null}),r.options.animation&&!e&&r.multiDrag.isMultiDrag){La=ia({},$);var a=va(L,!0);La.top-=a.f,La.left-=a.e}},dragOverAnimationComplete:function(){qa&&(qa=!1,Ra())},drop:function(t){var $=t.originalEvent,e=t.rootEl,r=t.parentEl,a=t.sortable,o=t.dispatchSortableEvent,n=t.oldIndex,l=t.putSortable,i=l||this.sortable;if($){var s=this.options,v=r.children;if(!Ma)if(s.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),N(L,s.selectedClass,!~F.indexOf(L)),~F.indexOf(L))F.splice(F.indexOf(L),1),fb=null,Ba({sortable:a,rootEl:e,name:"deselect",targetEl:L,originalEvt:$});else{if(F.push(L),Ba({sortable:a,rootEl:e,name:"select",targetEl:L,originalEvt:$}),$.shiftKey&&fb&&a.el.contains(fb)){var I,c,H=R(fb),d=R(L);if(~H&&~d&&H!==d)for(d>H?(c=H,I=d):(c=d,I=H+1);c<I;c++)~F.indexOf(v[c])||(N(v[c],s.selectedClass,!0),F.push(v[c]),Ba({sortable:a,rootEl:e,name:"select",targetEl:v[c],originalEvt:$}))}else fb=L;pa=i}if(Ma&&this.isMultiDrag){if((r[aa].options.sort||r!==e)&&F.length>1){var u=Q(L),g=R(L,":not(."+this.options.selectedClass+")");if(!Mb&&s.animation&&(L.thisAnimationDuration=null),i.captureAnimationState(),!Mb&&(s.animation&&(L.fromRect=u,F.forEach(function(t){if(t.thisAnimationDuration=null,t!==L){var $=qa?Q(t):u;t.fromRect=$,i.addAnimationState({target:t,rect:$})}})),Ra(),F.forEach(function(t){v[g]?r.insertBefore(t,v[g]):r.appendChild(t),g++}),n===R(L))){var h=!1;F.forEach(function(t){t.sortableIndex===R(t)||(h=!0)}),h&&o("update")}F.forEach(function(t){jb(t)}),i.animateAll()}pa=i}(e===r||l&&"clone"!==l.lastPutMode)&&fa.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})}},nullingGlobal:function(){this.isMultiDrag=Ma=!1,fa.length=0},destroyGlobal:function(){this._deselectMultiDrag(),J(document,"pointerup",this._deselectMultiDrag),J(document,"mouseup",this._deselectMultiDrag),J(document,"touchend",this._deselectMultiDrag),J(document,"keydown",this._checkKeyDown),J(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==Ma&&Ma||pa!==this.sortable||t&&ha(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;F.length;){var $=F[0];N($,this.options.selectedClass,!1),F.shift(),Ba({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:$,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ia(t,{pluginName:"multiDrag",utils:{select:function(t){var $=t.parentNode[aa];$&&$.options.multiDrag&&!~F.indexOf(t)&&(pa&&pa!==$&&(pa.multiDrag._deselectMultiDrag(),pa=$),N(t,$.options.selectedClass,!0),F.push(t))},deselect:function(t){var $=t.parentNode[aa],e=F.indexOf(t);$&&$.options.multiDrag&&~e&&(N(t,$.options.selectedClass,!1),F.splice(e,1))}},eventProperties:function(){var t=this,$=[],e=[];return F.forEach(function(r){var a;$.push({multiDragElement:r,index:r.sortableIndex}),a=qa&&r!==L?-1:qa?R(r,":not(."+t.options.selectedClass+")"):R(r),e.push({multiDragElement:r,index:a})}),{items:wc(F),clones:[].concat(fa),oldIndicies:$,newIndicies:e}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Sc(t,$){F.forEach(function(e,r){var a=$.children[e.sortableIndex+(t?Number(r):0)];a?$.insertBefore(e,a):$.appendChild(e)})}function Ub(t,$){fa.forEach(function(e,r){var a=$.children[e.sortableIndex+(t?Number(r):0)];a?$.insertBefore(e,a):$.appendChild(e)})}function Ra(){F.forEach(function(t){t!==L&&t.parentNode&&t.parentNode.removeChild(t)})}function Vb(){if(rc)return;rc=true;ta={};Xb(ta);bc="1.10.2";ka=ma(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i);wa=ma(/Edge/i);rb=ma(/firefox/i);Wa=ma(/safari/i)&&!ma(/chrome/i)&&!ma(/android/i);sb=ma(/iP(ad|od|hone)/i);cc=ma(/chrome/i)&&ma(/android/i);tb={capture:!1,passive:!1};vb=/\s+/g;aa="Sortable"+new Date().getTime();xa=[];Xa={initializeByDefault:!0};ya={mount:function(t){for(var $ in Xa)!Xa.hasOwnProperty($)||$ in t||(t[$]=Xa[$]);xa.push(t)},pluginEvent:function(t,$,e){var r=this;this.eventCanceled=!1,e.cancel=function(){r.eventCanceled=!0};var a=t+"Global";xa.forEach(function(r){$[r.pluginName]&&($[r.pluginName][a]&&$[r.pluginName][a](ra({sortable:$},e)),$.options[r.pluginName]&&$[r.pluginName][t]&&$[r.pluginName][t](ra({sortable:$},e)))})},initializePlugins:function(t,$,e,r){for(var a in xa.forEach(function(r){var a=r.pluginName;if(t.options[a]||r.initializeByDefault){var o=new r(t,$,t.options);o.sortable=t,o.options=t.options,t[a]=o,ia(e,o.defaults)}}),t.options)if(t.options.hasOwnProperty(a)){var o=this.modifyOption(t,a,t.options[a]);void 0!==o&&(t.options[a]=o)}},getEventProperties:function(t,$){var e={};return xa.forEach(function(r){"function"==typeof r.eventProperties&&ia(e,r.eventProperties.call($[r.pluginName],t))}),e},modifyOption:function(t,$,e){var r;return xa.forEach(function(a){t[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[$]&&(r=a.optionListeners[$].call(t[a.pluginName],e))}),r}};ca=function(t,$){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.evt,a=vc(e,["evt"]);ya.pluginEvent.bind(B)(t,$,ra({dragEl:q,parentEl:da,ghostEl:G,rootEl:W,nextEl:za,lastDownEl:wb,cloneEl:X,cloneHidden:Ya,dragStarted:_a,putSortable:ea,activeSortable:B.active,originalEvent:r,oldIndex:Ga,oldDraggableIndex:Za,newIndex:na,newDraggableIndex:$a,hideGhostForTarget:Gb,unhideGhostForTarget:Hb,cloneNowHidden:function(){Ya=!0},cloneNowShown:function(){Ya=!1},dispatchSortableEvent:function(t){ba({sortable:$,name:t,originalEvent:r})}},a))};cb=!1;hc=!1;Ha=[];zb=!1;Ab=!1;Bb=[];ic=!1;Ia=[];Ja="undefined"!=typeof document;Ka=sb;Cb=wa||ka?"cssFloat":"float";jc=Ja&&!cc&&!sb&&"draggable"in document.createElement("div");Db=function(){if(Ja){if(ka)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}();Eb=function(t,$){var e=z(t),r=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),a=Oa(t,0,$),o=Oa(t,1,$),n=a&&z(a),l=o&&z(o),i=n&&parseInt(n.marginLeft)+parseInt(n.marginRight)+Q(a).width,s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Q(o).width;if("flex"===e.display)return"column"===e.flexDirection||"column-reverse"===e.flexDirection?"vertical":"horizontal";if("grid"===e.display)return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&n.float&&"none"!==n.float){var v="left"===n.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==v?"horizontal":"vertical"}return a&&("block"===n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||i>=r&&"none"===e[Cb]||o&&"none"===e[Cb]&&i+s>r)?"vertical":"horizontal"};kc=function(t,$,e){var r=e?t.left:t.top,a=e?t.right:t.bottom,o=e?t.width:t.height,n=e?$.left:$.top,l=e?$.right:$.bottom,i=e?$.width:$.height;return r===n||a===l||r+o/2===n+i/2};lc=function(t,$){var e;return Ha.some(function(r){if(!gb(r)){var a=Q(r),o=r[aa].options.emptyInsertThreshold,n=t>=a.left-o&&t<=a.right+o,l=$>=a.top-o&&$<=a.bottom+o;return o&&n&&l?e=r:void 0}}),e};Fb=function(t){function $(t,e){return function(r,a,o,n){var l=r.options.group.name&&a.options.group.name&&r.options.group.name===a.options.group.name;if(null==t&&(e||l))return!0;if(null==t||!1===t)return!1;if(e&&"clone"===t)return t;if("function"==typeof t)return $(t(r,a,o,n),e)(r,a,o,n);var i=(e?r:a).options.group.name;return!0===t||"string"==typeof t&&t===i||t.join&&t.indexOf(i)>-1}}var e={},r=t.group;r&&"object"==sc(r)||(r={name:r}),e.name=r.name,e.checkPull=$(r.pull,!0),e.checkPut=$(r.put),e.revertClone=r.revertClone,t.group=e};Gb=function(){!Db&&G&&z(G,"display","none")};Hb=function(){!Db&&G&&z(G,"display","")};Ja&&document.addEventListener("click",function(t){if(hc)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),hc=!1,!1},!0);ua=function(t){if(q){t=t.touches?t.touches[0]:t;var $=lc(t.clientX,t.clientY);if($){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.target=e.rootEl=$,e.preventDefault=void 0,e.stopPropagation=void 0,$[aa]._onDragOver(e)}}};mc=function(t){q&&q.parentNode[aa]._isOutsideThisEl(t.target)};B.prototype={constructor:B,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(yb=null)},_getDirection:function(t,$){return"function"==typeof this.options.direction?this.options.direction.call(this,t,$,q):this.options.direction},_onTapStart:function(t){if(t.cancelable){var $=this,e=this.el,r=this.options,a=r.preventOnFilter,o=t.type,n=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(n||t).target,i=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,s=r.filter;if(Nc(e),!q&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||r.disabled||i.isContentEditable||(l=ha(l,r.draggable,e,!1))&&l.animated||wb===l)){if(Ga=R(l),Za=R(l,r.draggable),"function"==typeof s){if(s.call(this,t,l,this))return ba({sortable:$,rootEl:i,name:"filter",targetEl:l,toEl:e,fromEl:e}),ca("filter",$,{evt:t}),void(a&&t.cancelable&&t.preventDefault())}else if(s&&(s=s.split(",").some(function(r){if(r=ha(i,r.trim(),e,!1))return ba({sortable:$,rootEl:r,name:"filter",targetEl:l,fromEl:e,toEl:e}),ca("filter",$,{evt:t}),!0})))return void(a&&t.cancelable&&t.preventDefault());r.handle&&!ha(i,r.handle,e,!1)||this._prepareDragStart(t,n,l)}}},_prepareDragStart:function(t,$,e){var r,a=this,o=a.el,n=a.options,l=o.ownerDocument;if(e&&!q&&e.parentNode===o){var i=Q(e);if(W=o,da=(q=e).parentNode,za=q.nextSibling,wb=e,xb=n.group,B.dragged=q,Aa={target:q,clientX:($||t).clientX,clientY:($||t).clientY},fc=Aa.clientX-i.left,gc=Aa.clientY-i.top,this._lastX=($||t).clientX,this._lastY=($||t).clientY,q.style["will-change"]="all",r=function(){ca("delayEnded",a,{evt:t}),B.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!rb&&a.nativeDraggable&&(q.draggable=!0),a._triggerDragStart(t,$),ba({sortable:a,name:"choose",originalEvent:t}),N(q,n.chosenClass,!0))},n.ignore.split(",").forEach(function(t){Nb(q,t.trim(),lb)}),K(l,"dragover",ua),K(l,"mousemove",ua),K(l,"touchmove",ua),K(l,"mouseup",a._onDrop),K(l,"touchend",a._onDrop),K(l,"touchcancel",a._onDrop),rb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),ca("delayStart",this,{evt:t}),!n.delay||n.delayOnTouchOnly&&!$||this.nativeDraggable&&(wa||ka))r();else{if(B.eventCanceled)return void this._onDrop();K(l,"mouseup",a._disableDelayedDrag),K(l,"touchend",a._disableDelayedDrag),K(l,"touchcancel",a._disableDelayedDrag),K(l,"mousemove",a._delayedDragTouchMoveHandler),K(l,"touchmove",a._delayedDragTouchMoveHandler),n.supportPointer&&K(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,n.delay)}}},_delayedDragTouchMoveHandler:function(t){var $=t.touches?t.touches[0]:t;Math.max(Math.abs($.clientX-this._lastX),Math.abs($.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&lb(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;J(t,"mouseup",this._disableDelayedDrag),J(t,"touchend",this._disableDelayedDrag),J(t,"touchcancel",this._disableDelayedDrag),J(t,"mousemove",this._delayedDragTouchMoveHandler),J(t,"touchmove",this._delayedDragTouchMoveHandler),J(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,$){$=$||"touch"==t.pointerType&&t,!this.nativeDraggable||$?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):K(document,$?"touchmove":"mousemove",this._onTouchMove):(K(q,"dragend",this),K(W,"dragstart",this._onDragStart));try{document.selection?Pa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t,$){if(cb=!1,W&&q){ca("dragStarted",this,{evt:$}),this.nativeDraggable&&K(document,"dragover",mc);var e=this.options;!t&&N(q,e.dragClass,!1),N(q,e.ghostClass,!0),B.active=this,t&&this._appendGhost(),ba({sortable:this,name:"start",originalEvent:$})}else this._nulling()},_emulateDragOver:function(){if(la){this._lastX=la.clientX,this._lastY=la.clientY,Gb();for(var t=document.elementFromPoint(la.clientX,la.clientY),$=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(la.clientX,la.clientY))!==$;)$=t;if(q.parentNode[aa]._isOutsideThisEl(t),$)do{if($[aa]){if($[aa]._onDragOver({clientX:la.clientX,clientY:la.clientY,target:t,rootEl:$})&&!this.options.dragoverBubble)break}t=$}while($=$.parentNode);Hb()}},_onTouchMove:function(t){if(Aa){var $=this.options,e=$.fallbackTolerance,r=$.fallbackOffset,a=t.touches?t.touches[0]:t,o=G&&va(G,!0),n=G&&o&&o.a,l=G&&o&&o.d,i=Ka&&ga&&Pb(ga),s=(a.clientX-Aa.clientX+r.x)/(n||1)+(i?i[0]-Bb[0]:0)/(n||1),v=(a.clientY-Aa.clientY+r.y)/(l||1)+(i?i[1]-Bb[1]:0)/(l||1);if(!B.active&&!cb){if(e&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<e)return;this._onDragStart(t,!0)}if(G){o?(o.e+=s-(dc||0),o.f+=v-(ec||0)):o={a:1,b:0,c:0,d:1,e:s,f:v};var I="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");z(G,"webkitTransform",I),z(G,"mozTransform",I),z(G,"msTransform",I),z(G,"transform",I),dc=s,ec=v,la=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!G){var t=this.options.fallbackOnBody?document.body:W,$=Q(q,!0,Ka,!0,t),e=this.options;if(Ka){for(ga=t;"static"===z(ga,"position")&&"none"===z(ga,"transform")&&ga!==document;)ga=ga.parentNode;ga!==document.body&&ga!==document.documentElement?(ga===document&&(ga=ja()),$.top+=ga.scrollTop,$.left+=ga.scrollLeft):ga=ja(),Bb=Pb(ga)}N(G=q.cloneNode(!0),e.ghostClass,!1),N(G,e.fallbackClass,!0),N(G,e.dragClass,!0),z(G,"transition",""),z(G,"transform",""),z(G,"box-sizing","border-box"),z(G,"margin",0),z(G,"top",$.top),z(G,"left",$.left),z(G,"width",$.width),z(G,"height",$.height),z(G,"opacity","0.8"),z(G,"position",Ka?"absolute":"fixed"),z(G,"zIndex","100000"),z(G,"pointerEvents","none"),B.ghost=G,t.appendChild(G),z(G,"transform-origin",fc/parseInt(G.style.width)*100+"% "+gc/parseInt(G.style.height)*100+"%")}},_onDragStart:function(t,$){var e=this,r=t.dataTransfer,a=e.options;ca("dragStart",this,{evt:t}),B.eventCanceled?this._onDrop():(ca("setupClone",this),B.eventCanceled||((X=ib(q)).draggable=!1,X.style["will-change"]="",this._hideClone(),N(X,this.options.chosenClass,!1),B.clone=X),e.cloneId=Pa(function(){ca("clone",e),B.eventCanceled||(e.options.removeCloneOnHide||W.insertBefore(X,q),e._hideClone(),ba({sortable:e,name:"clone"}))}),!$&&N(q,a.dragClass,!0),$?(hc=!0,e._loopId=setInterval(e._emulateDragOver,50)):(J(document,"mouseup",e._onDrop),J(document,"touchend",e._onDrop),J(document,"touchcancel",e._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(e,r,q)),K(document,"drop",e),z(q,"transform","translateZ(0)")),cb=!0,e._dragStartId=Pa(e._dragStarted.bind(e,$,t)),K(document,"selectstart",e),_a=!0,Wa&&z(document.body,"user-select","none"))},_onDragOver:function(t){var $,e,r,a,o=this.el,n=t.target,l=this.options,i=l.group,s=B.active,v=xb===i,I=l.sort,c=ea||s,H=this,d=!1;if(!ic){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),n=ha(n,l.draggable,o,!0),y("dragOver"),B.eventCanceled)return d;if(q.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||H._ignoreWhileAnimating===n)return T(!1);if(hc=!1,s&&!l.disabled&&(v?I||(r=!W.contains(q)):ea===this||(this.lastPutMode=xb.checkPull(this,s,q,t))&&i.checkPut(this,s,q,t))){if(a="vertical"===this._getDirection(t,n),$=Q(q),y("dragOverValid"),B.eventCanceled)return d;if(r)return da=W,C(),this._hideClone(),y("revert"),B.eventCanceled||(za?W.insertBefore(q,za):W.appendChild(q)),T(!0);var u=gb(o,l.draggable);if(!u||Jc(t,a,this)&&!u.animated){if(u===q)return T(!1);if(u&&o===t.target&&(n=u),n&&(e=Q(n)),!1!==kb(W,o,q,$,n,e,t,!!n))return C(),o.appendChild(q),da=o,A(),T(!0)}else if(n.parentNode===o){e=Q(n);var g,h,p,f=q.parentNode!==o,m=!kc(q.animated&&q.toRect||$,n.animated&&n.toRect||e,a),E=a?"top":"left",b=Ob(n,"top","top")||Ob(q,"top","top"),D=b?b.scrollTop:void 0;if(yb!==n&&(h=e[E],zb=!1,Ab=!m&&l.invertSwap||f),0!==(g=Kc(t,n,e,a,m?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ab,yb===n))){var S=R(q);do{S-=g,p=da.children[S]}while(p&&("none"===z(p,"display")||p===G))}if(0===g||p===n)return T(!1);yb=n,ab=g;var x=n.nextElementSibling,w=!1,_=kb(W,o,q,$,n,e,t,w=1===g);if(!1!==_)return 1!==_&&-1!==_||(w=1===_),ic=!0,setTimeout(Ic,30),C(),w&&!x?o.appendChild(q):n.parentNode.insertBefore(q,w?x:n),b&&Rb(b,0,D-b.scrollTop),da=q.parentNode,void 0===h||Ab||(bb=Math.abs(h-Q(n)[E])),A(),T(!0)}if(o.contains(q))return T(!1)}return!1}function y(l,i){ca(l,H,ra({evt:t,isOwner:v,axis:a?"vertical":"horizontal",revert:r,dragRect:$,targetRect:e,canSort:I,fromSortable:c,target:n,completed:T,onMove:function(e,r){return kb(W,o,q,$,e,Q(e),t,r)},changed:A},i))}function C(){y("dragOverAnimationCapture"),H.captureAnimationState(),H!==c&&c.captureAnimationState()}function T($){return y("dragOverCompleted",{insertion:$}),$&&(v?s._hideClone():s._showClone(H),H!==c&&(N(q,ea?ea.options.ghostClass:s.options.ghostClass,!1),N(q,l.ghostClass,!0)),ea!==H&&H!==B.active?ea=H:H===B.active&&ea&&(ea=null),c===H&&(H._ignoreWhileAnimating=n),H.animateAll(function(){y("dragOverAnimationComplete"),H._ignoreWhileAnimating=null}),H!==c&&(c.animateAll(),c._ignoreWhileAnimating=null)),(n===q&&!q.animated||n===o&&!n.animated)&&(yb=null),l.dragoverBubble||t.rootEl||n===document||(q.parentNode[aa]._isOutsideThisEl(t.target),!$&&ua(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),d=!0}function A(){na=R(q),$a=R(q,l.draggable),ba({sortable:H,name:"change",toEl:o,newIndex:na,newDraggableIndex:$a,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){J(document,"mousemove",this._onTouchMove),J(document,"touchmove",this._onTouchMove),J(document,"pointermove",this._onTouchMove),J(document,"dragover",ua),J(document,"mousemove",ua),J(document,"touchmove",ua)},_offUpEvents:function(){var t=this.el.ownerDocument;J(t,"mouseup",this._onDrop),J(t,"touchend",this._onDrop),J(t,"pointerup",this._onDrop),J(t,"touchcancel",this._onDrop),J(document,"selectstart",this)},_onDrop:function(t){var $=this.el,e=this.options;na=R(q),$a=R(q,e.draggable),ca("drop",this,{evt:t}),da=q&&q.parentNode,na=R(q),$a=R(q,e.draggable),B.eventCanceled?this._nulling():(cb=!1,Ab=!1,zb=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),mb(this.cloneId),mb(this._dragStartId),this.nativeDraggable&&(J(document,"drop",this),J($,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wa&&z(document.body,"user-select",""),z(q,"transform",""),t&&(_a&&(t.cancelable&&t.preventDefault(),!e.dropBubble&&t.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(W===da||ea&&"clone"!==ea.lastPutMode)&&X&&X.parentNode&&X.parentNode.removeChild(X),q&&(this.nativeDraggable&&J(q,"dragend",this),lb(q),q.style["will-change"]="",_a&&!cb&&N(q,ea?ea.options.ghostClass:this.options.ghostClass,!1),N(q,this.options.chosenClass,!1),ba({sortable:this,name:"unchoose",toEl:da,newIndex:null,newDraggableIndex:null,originalEvent:t}),W!==da?(na>=0&&(ba({rootEl:da,name:"add",toEl:da,fromEl:W,originalEvent:t}),ba({sortable:this,name:"remove",toEl:da,originalEvent:t}),ba({rootEl:da,name:"sort",toEl:da,fromEl:W,originalEvent:t}),ba({sortable:this,name:"sort",toEl:da,originalEvent:t})),ea&&ea.save()):na!==Ga&&na>=0&&(ba({sortable:this,name:"update",toEl:da,originalEvent:t}),ba({sortable:this,name:"sort",toEl:da,originalEvent:t})),B.active&&(null!=na&&-1!==na||(na=Ga,$a=Za),ba({sortable:this,name:"end",toEl:da,originalEvent:t}),this.save()))),this._nulling())},_nulling:function(){ca("nulling",this),W=q=da=G=za=X=wb=Ya=Aa=la=_a=na=$a=Ga=Za=yb=ab=ea=xb=B.dragged=B.ghost=B.clone=B.active=null,Ia.forEach(function(t){t.checked=!0}),Ia.length=dc=ec=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":q&&(this._onDragOver(t),Hc(t));break;case"selectstart":t.preventDefault();}},toArray:function(){for(var t,$=[],e=this.el.children,r=0,a=e.length,o=this.options;r<a;r++)ha(t=e[r],o.draggable,this.el,!1)&&$.push(t.getAttribute(o.dataIdAttr)||Mc(t));return $},sort:function(t){var $={},e=this.el;this.toArray().forEach(function(t,r){var a=e.children[r];ha(a,this.options.draggable,e,!1)&&($[t]=a)},this),t.forEach(function(t){$[t]&&(e.removeChild($[t]),e.appendChild($[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,$){return ha(t,$||this.options.draggable,this.el,!1)},option:function(t,$){var e=this.options;if(void 0===$)return e[t];var r=ya.modifyOption(this,t,$);e[t]=void 0!==r?r:$,"group"===t&&Fb(e)},destroy:function(){ca("destroy",this);var t=this.el;t[aa]=null,J(t,"mousedown",this._onTapStart),J(t,"touchstart",this._onTapStart),J(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(J(t,"dragover",this),J(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ha.splice(Ha.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ya){if(ca("hideClone",this),B.eventCanceled)return;z(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),Ya=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Ya){if(ca("showClone",this),B.eventCanceled)return;W.contains(q)&&!this.options.group.revertClone?W.insertBefore(X,q):za?W.insertBefore(X,za):W.appendChild(X),this.options.group.revertClone&&this.animate(q,X),z(X,"display",""),Ya=!1}}else this._hideClone()}},Ja&&K(document,"touchmove",function(t){(B.active||cb)&&t.cancelable&&t.preventDefault()}),B.utils={on:K,off:J,css:z,find:Nb,is:function(t,$){return!!ha(t,$,t,!1)},extend:Cc,throttle:Qb,closest:ha,toggleClass:N,clone:ib,index:R,nextTick:Pa,cancelNextTick:mb,detectDirection:Eb,getChild:Oa},B.get=function(t){return t[aa]},B.mount=function(){for(var t=arguments.length,$=new Array(t),e=0;e<t;e++)$[e]=arguments[e];$[0].constructor===Array&&($=$[0]),$.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(B.utils=ra({},B.utils,t.utils)),ya.mount(t)})},B.create=function(t,$){return new B(t,$)},B.version=bc;Y=[];qc=!1;eb=Qb(function(t,$,e,r){if($.scroll){var a,o=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,l=$.scrollSensitivity,i=$.scrollSpeed,s=ja(),v=!1;nc!==e&&(nc=e,Qa(),Ib=$.scroll,a=$.scrollFn,!0===Ib&&(Ib=sa(e,!0)));var I=0,c=Ib;do{var H=c,d=Q(H),u=d.top,g=d.bottom,h=d.left,p=d.right,f=d.width,m=d.height,E=void 0,b=void 0,D=H.scrollWidth,S=H.scrollHeight,x=z(H),w=H.scrollLeft,_=H.scrollTop;H===s?(E=f<D&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),b=m<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(E=f<D&&("auto"===x.overflowX||"scroll"===x.overflowX),b=m<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var y=E&&(Math.abs(p-o)<=l&&w+f<D)-(Math.abs(h-o)<=l&&!!w),C=b&&(Math.abs(g-n)<=l&&_+m<S)-(Math.abs(u-n)<=l&&!!_);if(!Y[I])for(var T=0;T<=I;T++)Y[T]||(Y[T]={});Y[I].vx==y&&Y[I].vy==C&&Y[I].el===H||(Y[I].el=H,Y[I].vx=y,Y[I].vy=C,clearInterval(Y[I].pid),0==y&&0==C||(v=!0,Y[I].pid=setInterval(function(){r&&0===this.layer&&B.active._onTouchMove(Jb);var $=Y[this.layer].vy?Y[this.layer].vy*i:0,e=Y[this.layer].vx?Y[this.layer].vx*i:0;"function"==typeof a&&"continue"!==a.call(B.dragged.parentNode[aa],e,$,t,Jb,Y[this.layer].el)||Rb(Y[this.layer].el,e,$)}.bind({layer:I}),24))),I++}while($.bubbleScroll&&c!==s&&(c=sa(c,!1)));qc=v}},30);Kb=function(t){var $=t.originalEvent,e=t.putSortable,r=t.dragEl,a=t.activeSortable,o=t.dispatchSortableEvent,n=t.hideGhostForTarget,l=t.unhideGhostForTarget;if($){var i=e||a;n();var s=$.changedTouches&&$.changedTouches.length?$.changedTouches[0]:$,v=document.elementFromPoint(s.clientX,s.clientY);l(),i&&!i.el.contains(v)&&(o("spill"),this.onSpill({dragEl:r,putSortable:e}))}};nb.prototype={startIndex:null,dragStart:function(t){var $=t.oldDraggableIndex;this.startIndex=$},onSpill:function(t){var $=t.dragEl,e=t.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var r=Oa(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore($,r):this.sortable.el.appendChild($),this.sortable.animateAll(),e&&e.animateAll()},drop:Kb},ia(nb,{pluginName:"revertOnSpill"}),ob.prototype={onSpill:function(t){var $=t.dragEl,e=t.putSortable||this.sortable;e.captureAnimationState(),$.parentNode&&$.parentNode.removeChild($),e.animateAll()},drop:Kb},ia(ob,{pluginName:"removeOnSpill"});F=[];fa=[];Mb=!1;qa=!1;Ma=!1;B.mount(new Oc),B.mount(ob,nb),ta.default=B,ta.Swap=Pc,ta.Sortable=B,ta.MultiDrag=Rc}!function(t,e){"object"==typeof Fa?Fa=e((Vb(),ta)):"function"==typeof Va&&Va.amd?Va(["sortablejs"],e):"object"==typeof Fa?(ac=e((Vb(),ta)),Fa.vuedraggable=ac):t.vuedraggable=e(t.Sortable)}("undefined"!=typeof self?self:Fa,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"01f9":function(t,e,n){var r=n("2d00"),o=n("5ca1"),i=n("2aba"),a=n("32e9"),c=n("84f2"),u=n("41a0"),s=n("7f20"),f=n("38fd"),l=n("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,h,v,g,b){u(n,e,h);var y,m,x,O=function(t){if(!d&&t in j)return j[t];switch(t){case"keys":case"values":return function(){return new n(this,t)};}return function(){return new n(this,t)}},S=e+" Iterator",$="values"==v,w=!1,j=t.prototype,_=j[l]||j["@@iterator"]||v&&j[v],I=_||O(v),M=v?$?O("entries"):I:void 0,C="Array"==e&&j.entries||_;if(C&&(x=f(C.call(new t)))!==Object.prototype&&x.next&&(s(x,S,!0),r||"function"==typeof x[l]||a(x,l,p)),$&&_&&"values"!==_.name&&(w=!0,I=function(){return _.call(this)}),r&&!b||!d&&!w&&j[l]||a(j,l,I),c[e]=I,c[S]=p,v)if(y={values:$?I:O("values"),keys:g?I:O("keys"),entries:M},b)for(m in y)m in j||i(j,m,y[m]);else o(o.P+o.F*(d||w),e,y);return y}},"02f4":function(t,e,n){var r=n("4588"),o=n("be13");t.exports=function(t){return function(e,n){var i,a,c=String(o(e)),u=r(n),s=c.length;return u<0||u>=s?t?"":void 0:(i=c.charCodeAt(u))<55296||i>56319||u+1===s||(a=c.charCodeAt(u+1))<56320||a>57343?t?c.charAt(u):i:t?c.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},"0390":function(t,e,n){var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var r=n("ce10"),o=n("e11e");t.exports=Object.keys||function(t){return r(t,o)}},1495:function(t,e,n){var r=n("86cc"),o=n("cb7c"),i=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),c=a.length,u=0;c>u;)r.f(t,n=a[u++],e[n]);return t}},"214f":function(t,e,n){n("b0c5");var r=n("2aba"),o=n("32e9"),i=n("79e5"),a=n("be13"),c=n("2b4c"),u=n("520a"),s=c("species"),f=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=c(t),p=!i(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),h=p?!i(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[d](""),!e}):void 0;if(!p||!h||"replace"===t&&!f||"split"===t&&!l){var v=/./[d],g=n(a,d,""[t],function(t,e,n,r,o){return e.exec===u?p&&!o?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),b=g[0],y=g[1];r(String.prototype,t,b),o(RegExp.prototype,d,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),o=n("7726").document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),o=n("2b4c")("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,n){var r=n("7726"),o=n("32e9"),i=n("69a8"),a=n("ca5a")("src"),c=n("fa5b"),u=(""+c).split("toString");n("8378").inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,c){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(s&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:c?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||c.call(this)})},"2aeb":function(t,e,n){var r=n("cb7c"),o=n("1495"),i=n("e11e"),a=n("613b")("IE_PROTO"),c=function(){},u=function(){var t,e=n("230e")("iframe"),r=i.length;for(e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},"2b4c":function(t,e,n){var r=n("5537")("wks"),o=n("ca5a"),i=n("7726").Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2fdb":function(t,e,n){var r=n("5ca1"),o=n("d2c8");r(r.P+r.F*n("5147")("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,n){var r=n("86cc"),o=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"38fd":function(t,e,n){var r=n("69a8"),o=n("4bf8"),i=n("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"41a0":function(t,e,n){var r=n("2aeb"),o=n("4630"),i=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},"456d":function(t,e,n){var r=n("4bf8"),o=n("0d58");n("5eda")("keys",function(){return function(t){return o(r(t))}})},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},5147:function(t,e,n){var r=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(o){}}return!0}},"520a":function(t,e,n){var r,o,i=n("0bfb"),a=RegExp.prototype.exec,c=String.prototype.replace,u=a,s=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=void 0!==/()??/.exec("")[1];(s||f)&&(u=function(t){var e,n,r,o,u=this;return f&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),s&&(e=u.lastIndex),r=a.call(u,t),s&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),f&&r&&r.length>1&&c.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r}),t.exports=u},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,n){var r=n("8378"),o=n("7726"),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,n){var r=n("7726"),o=n("8378"),i=n("32e9"),a=n("2aba"),c=n("9b43"),u=function(t,e,n){var s,f,l,d,p=t&u.F,h=t&u.G,v=t&u.S,g=t&u.P,b=t&u.B,y=h?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,m=h?o:o[e]||(o[e]={}),x=m.prototype||(m.prototype={});for(s in h&&(n=e),n)l=((f=!p&&y&&void 0!==y[s])?y:n)[s],d=b&&f?c(l,r):g&&"function"==typeof l?c(Function.call,l):l,y&&a(y,s,l,t&u.U),m[s]!=l&&i(m,s,d),g&&x[s]!=l&&(x[s]=l)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"5eda":function(t,e,n){var r=n("5ca1"),o=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},"5f1b":function(t,e,n){var r=n("23c6"),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"613b":function(t,e,n){var r=n("5537")("keys"),o=n("ca5a");t.exports=function(t){return r[t]||(r[t]=o(t))}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6762:function(t,e,n){var r=n("5ca1"),o=n("c366")(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(t,e,n){var r=n("626a"),o=n("be13");t.exports=function(t){return r(o(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,n){var r=n("0d58"),o=n("2621"),i=n("52a7"),a=n("4bf8"),c=n("626a"),u=Object.assign;t.exports=!u||n("79e5")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,s=1,f=o.f,l=i.f;u>s;)for(var d,p=c(arguments[s++]),h=f?r(p).concat(f(p)):r(p),v=h.length,g=0;v>g;)l.call(p,d=h[g++])&&(n[d]=p[d]);return n}:u},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,n){var r=n("86cc").f,o=n("69a8"),i=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},8378:function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var r=n("cb7c"),o=n("c69a"),i=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)};}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),o=Array.prototype;null==o[r]&&n("32e9")(o,r,{}),t.exports=function(t){o[r][t]=!0}},"9def":function(t,e,n){var r=n("4588"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a352:function(e,n){e.exports=t},a481:function(t,e,n){var r=n("cb7c"),o=n("4bf8"),i=n("9def"),a=n("4588"),c=n("0390"),u=n("5f1b"),s=Math.max,f=Math.min,l=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n("214f")("replace",2,function(t,e,n,h){return[function(r,o){var i=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(t,e){var o=h(n,t,this,e);if(o.done)return o.value;var l=r(t),d=String(this),p="function"==typeof e;p||(e=String(e));var g=l.global;if(g){var b=l.unicode;l.lastIndex=0}for(var y=[];;){var m=u(l,d);if(null===m)break;if(y.push(m),!g)break;""===String(m[0])&&(l.lastIndex=c(d,i(l.lastIndex),b))}for(var x,O="",S=0,$=0;$<y.length;$++){m=y[$];for(var w=String(m[0]),j=s(f(a(m.index),d.length),0),_=[],I=1;I<m.length;I++)_.push(void 0===(x=m[I])?x:String(x));var M=m.groups;if(p){var C=[w].concat(_,j,d);void 0!==M&&C.push(M);var T=String(e.apply(void 0,C))}else T=v(w,d,j,_,M,e);j>=S&&(O+=d.slice(S,j)+T,S=j+w.length)}return O+d.slice(S)}];function v(t,e,r,i,a,c){var u=r+t.length,s=i.length,f=p;return void 0!==a&&(a=o(a),f=d),n.call(c,f,function(n,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":c=a[o.slice(1,-1)];break;default:var f=+o;if(0===f)return n;if(f>s){var d=l(f/10);return 0===d?n:d<=s?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):n}c=i[f-1];}return void 0===c?"":c})}})},aae3:function(t,e,n){var r=n("d3f4"),o=n("2d95"),i=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},ac6a:function(t,e,n){for(var r=n("cadf"),o=n("0d58"),i=n("2aba"),a=n("7726"),c=n("32e9"),u=n("84f2"),s=n("2b4c"),f=s("iterator"),l=s("toStringTag"),d=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),v=0;v<h.length;v++){var g,b=h[v],y=p[b],m=a[b],x=m&&m.prototype;if(x&&(x[f]||c(x,f,d),x[l]||c(x,l,b),u[b]=d,y))for(g in r)x[g]||i(x,g,r[g],!0)}},b0c5:function(t,e,n){var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),o=n("9def"),i=n("77f1");t.exports=function(t){return function(e,n,a){var c,u=r(e),s=o(u.length),f=i(a,s);if(t&&n!=n){for(;s>f;)if((c=u[f++])!=c)return!0}else for(;s>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},c649:function(t,e,n){(function(t){n.d(e,"c",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return r}),n.d(e,"d",function(){return u});n("a481");var r="undefined"!=typeof window?window.console:t.console;var o,i,a=/-(\w)/g,c=(o=function(t){return t.replace(a,function(t,e){return e?e.toUpperCase():""})},i=Object.create(null),function(t){return i[t]||(i[t]=o(t))});function u(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function s(t,e,n){var r=0===n?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,r)}}).call(this,n("c8ba"))},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cadf:function(t,e,n){var r=n("9c6c"),o=n("d53b"),i=n("84f2"),a=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,n){var r=n("69a8"),o=n("6821"),i=n("c366")(!1),a=n("613b")("IE_PROTO");t.exports=function(t,e){var n,c=o(t),u=0,s=[];for(n in c)n!=a&&r(c,n)&&s.push(n);for(;e.length>u;)r(c,n=e[u++])&&(~i(s,n)||s.push(n));return s}},d2c8:function(t,e,n){var r=n("aae3"),o=n("be13");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},d3f4:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,n){var r=n("5ca1"),o=n("9def"),i=n("d2c8"),a="".startsWith;r(r.P+r.F*n("5147")("startsWith"),"String",{startsWith:function(t){var e=i(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},f6fd:function(t,e){!function(t){var e=t.getElementsByTagName("script");"currentScript"in t||Object.defineProperty(t,"currentScript",{get:function(){try{throw new Error}catch(r){var t,n=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in e)if(e[t].src==n||"interactive"==e[t].readyState)return e[t];return null}}})}(document)},f751:function(t,e,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement},fb15:function(t,e,n){var r;(n.r(e),"undefined"!=typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("f751"),n("f559"),n("ac6a"),n("cadf"),n("456d");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n("6762"),n("2fdb");function c(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n("a352"),s=n.n(u),f=n("c649");function l(t,e){var n=this;this.$nextTick(function(){return n.$emit(t.toLowerCase(),e)})}function d(t){return["transition-group","TransitionGroup"].includes(t)}function p(t,e,n){return t[n]||(e[n]?e[n]():void 0)}var h=["Start","Add","Remove","Update","End"],v=["Choose","Unchoose","Sort","Filter","Clone"],g=["Move"].concat(h,v).map(function(t){return"on"+t}),b=null,y={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=function(t){if(!t||1!==t.length)return!1;var e=a(t,1)[0].componentOptions;return!!e&&d(e.tag)}(e);var n=function(t,e,n){var r=0,o=0,i=p(e,n,"header");i&&(r=i.length,t=t?[].concat(c(i),c(t)):c(i));var a=p(e,n,"footer");return a&&(o=a.length,t=t?[].concat(c(t),c(a)):c(a)),{children:t,headerOffset:r,footerOffset:o}}(e,this.$slots,this.$scopedSlots),r=n.children,o=n.headerOffset,i=n.footerOffset;this.headerOffset=o,this.footerOffset=i;var u=function(t,e){var n=null,r=function(t,e){n=function(t,e,n){return void 0===n?t:((t=t||{})[e]=n,t)}(n,t,e)};if(r("attrs",Object.keys(t).filter(function(t){return"id"===t||t.startsWith("data-")}).reduce(function(e,n){return e[n]=t[n],e},{})),!e)return n;var o=e.on,i=e.props,a=e.attrs;return r("on",o),r("props",i),Object.assign(n.attrs,a),n}(this.$attrs,this.componentData);return t(this.getTag(),u,r)},created:function(){null!==this.list&&null!==this.value&&f.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&f.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&f.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};h.forEach(function(n){e["on"+n]=function(t){var e=this;return function(n){null!==e.realList&&e["onDrag"+t](n),l.call(e,t,n)}}.call(t,n)}),v.forEach(function(n){e["on"+n]=l.bind(t,n)});var n=Object.keys(this.$attrs).reduce(function(e,n){return e[Object(f.a)(n)]=t.$attrs[n],e},{}),r=Object.assign({},this.options,n,e,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new s.a(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var n=Object(f.a)(e);-1===g.indexOf(n)&&this._sortable.option(n,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=function(t,e,n,r){if(!t)return[];var o=t.map(function(t){return t.elm}),i=e.length-r,a=c(e).map(function(t,e){return e>=i?o.length:o.indexOf(t)});return n?a.filter(function(t){return-1!==t}):a}(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)})},getUnderlyingVm:function(t){var e=function(t,e){return t.map(function(t){return t.elm}).indexOf(e)}(this.getChildrenNodes()||[],t);return-1===e?null:{index:e,element:this.realList[e]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&d(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=c(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,c(t))};this.alterList(e)},updatePosition:function(t,e){var n=function(n){return n.splice(e,0,n.splice(t,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(t){var e=t.to,n=t.related,r=this.getUnderlyingPotencialDraggableComponent(e);if(!r)return{component:r};var o=r.realList,i={list:o,component:r};if(e!==n&&o&&r.getUnderlyingVm){var a=r.getUnderlyingVm(n);if(a)return Object.assign(a,i)}return i},getVmIndex:function(t){var e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),b=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(f.d)(t.item);var n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();var r={element:e,newIndex:n};this.emitChanges({added:r})}},onDragRemove:function(t){if(Object(f.c)(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})}else Object(f.d)(t.clone)},onDragUpdate:function(t){Object(f.d)(t.item),Object(f.c)(t.from,t.item,t.oldIndex);var e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);var r={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:r})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var n=c(e.to.children).filter(function(t){return"none"!==t.style.display}),r=n.indexOf(e.related),o=t.component.getVmIndex(r);return-1!==n.indexOf(b)||!e.willInsertAfter?o:o+1},onDragMove:function(t,e){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(t),o=this.context,i=this.computeFutureIndex(r,t);return Object.assign(o,{futureIndex:i}),n(Object.assign({},t,{relatedContext:r,draggedContext:o}),e)},onDragEnd:function(){this.computeIndexes(),b=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",y);var m=y;e.default=m}}).default});var Sa={props:{counter:[Boolean,Object],disabled:Boolean,endpoints:Object,input:[String,Number],name:[String,Number],required:Boolean,type:String,value:{type:Array,default:[]},blockConfigs:Object,fieldsets:Object,columns:Number,max:Number,label:String,pageId:String,pageUid:String,encodedPageId:String,parentPath:String,pending:Boolean},data:function(){return{dragging:!1,targetPosition:null,lastUniqueKey:0,cssContents:{},jsContents:{},dialogOpen:!1,extendedBlockConfigs:{}}},components:{BuilderBlock:Ea},mounted:function(){var e=this;this.pending?this.$api.post("kirby-builder/pages/".concat(this.pageId,"/builderconfig"),{fieldsets:this.fieldsets,value:this.value}).then(function(t){e.extendedBlockConfigs=t.fieldsets,e.value=t.value,e.loadBlockPreviewStyles()}):(this.extendedBlockConfigs=this.fieldsets,null==this.value&&(this.value=Array()),this.loadBlockPreviewStyles())},computed:{classObject:function(){var e={};return e["kBuilder--col-"+this.columnsCount]=!0,e["kBuilder--dragging"]=this.dragging,e},path:function(){return this.parentPath?"".concat(this.parentPath,"+").concat(this.name):this.name},columnsCount:function(){return this.columns?this.columns:"1"},columnWidth:function(){return this.columns?"1/"+this.columns:"1/1"},draggableOptions:function(){return{group:this._uid,handle:".kBuilder__dragDropHandle",forceFallback:!0,fallbackClass:"sortable-fallback",fallbackOnBody:!0,scroll:document.querySelector(".k-panel-view")}},blockCount:function(){return this.value.length},fieldsetCount:function(){return Object.keys(this.extendedBlockConfigs).length},fieldsetKeys:function(){return Object.keys(this.extendedBlockConfigs)},addBlockButtonLabel:function(){return this.$t("add")},items:function(){var e=[];for(var t in this.extendedBlockConfigs)e.push({id:t,text:this.extendedBlockConfigs[t].name||this.extendedBlockConfigs[t].label});return e}},methods:{updateValue:function(e,t){this.$set(this.value,e,t)},loadBlockFormsByConfig:function(e){return"string"==typeof e&&(e={extends:e}),this.$api.post("kirby-builder/pages/".concat(this.pageId,"/blockformbyconfig"),e)},loadBlockPreviewStyles:function(){var e=this;Object.values(this.extendedBlockConfigs).forEach(function(t){if(t.preview&&t.preview.css){var n=t.preview.css;if(!e.cssContents[n])return e.$set(e.cssContents,n,{}),fetch("/"+n.replace(/^\/+/g,"")).then(function(e){return e.text()}).then(function(t){e.$set(e.cssContents,n,t)})}})},onBlockInput:function(e){this.$emit("input",this.value)},onBlockMoved:function(e){this.$emit("input",this.value)},onBlockAdded:function(e){this.$emit("input",this.value)},onBlockRemoved:function(e){this.$emit("input",this.value)},onDragEnd:function(e){this.dragging=!1},onMove:function(e){return this.$root.$emit("blockMoved"),e.relatedContext.index!=this.value.length+1},onStartDrag:function(e){this.dragging=!0;var t=e.item.getElementsByClassName("kBuilderPreview__frame")[0];if(t){var n=t.contentWindow.document,i=document.getElementsByClassName("sortable-drag")[0].getElementsByClassName("kBuilderPreview__frame")[0].contentWindow.document;i.open(),i.write(n.documentElement.innerHTML),i.close()}},onClickAddBlock:function(e){this.targetPosition=e,1==this.fieldsetCount?this.addBlock(this.fieldsetKeys[0]):this.$refs.dialog.open()},onOpenDialog:function(){this.dialogOpen=!0},onCloseDialog:function(){this.dialogOpen=!1},addBlock:function(e){null==this.value&&(this.value=[]);var t=null==this.targetPosition?this.value.length:this.targetPosition,n=this.extendedBlockConfigs[e];this.value.splice(t,0,this.getBlankContent(e,n)),this.targetPosition=null,this.dialogOpen&&this.$refs.dialog.close(),this.$emit("input",this.value)},addBlockClicked:function(e){this.addBlock(e.id)},cloneBlock:function(e,t,n,i){var o=JSON.parse(JSON.stringify(this.value[e]));this.deepRemoveProperty(o,"_uid"),this.value.splice(e+1,0,o);var l=this.value[e+1];l.uniqueKey=this.lastUniqueKey++,null!=t&&(l.showPreviewInitially=t),null!=n&&(l.expandedInitially=n),i&&(l.activeFieldSetInitially=i),this.$emit("input",this.value)},deleteBlock:function(e){this.clearLocalUiStates(this.value[e]),this.value.splice(e,1),this.$emit("input",this.value)},getBlankContent:function(e,t){return{_key:e,_uid:e+"_"+new Date().valueOf()+"_"+this._uid}},deepRemoveProperty:function(e,t){var n=this;Object.keys(e).forEach(function(i){i===t?delete e[i]:e[i]&&"object"===pb(e[i])&&n.deepRemoveProperty(e[i],t)})},clearLocalUiStates:function(e){for(var t in e)if(e.hasOwnProperty(t)){e[t];"_uid"===t?localStorage.removeItem("kBuilder.uiState.".concat(e[t])):"object"===pb(e[t])&&this.clearLocalUiStates(e[t])}}}};if(typeof Sa==="function"){Sa=Sa.options}Object.assign(Sa,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-field",{staticClass:"kBuilder",class:_vm.classObject,attrs:{"label":_vm.label}},[_c("k-draggable",{staticClass:"k-grid kBuilder__blocks",attrs:{"move":_vm.onMove,"list":_vm.value,"options":_vm.draggableOptions},on:{"update":_vm.onBlockMoved,"add":_vm.onBlockAdded,"remove":_vm.onBlockRemoved,"end":_vm.onDragEnd}},[_vm._l(_vm.value,function(blockValue,index){return _vm.extendedBlockConfigs[blockValue._key]?_c("k-column",{key:blockValue._uid,staticClass:"kBuilder__column",attrs:{"width":_vm.columnWidth}},[!_vm.max||_vm.blockCount<_vm.max?_c("div",{staticClass:"kBuilder__inlineAddButton",class:{"kBuilder__inlineAddButton--horizontal":_vm.columnsCount==1,"kBuilder__inlineAddButton--vertical":_vm.columnsCount>1},on:{"click":function($event){return _vm.onClickAddBlock(index)}}}):_vm._e(),_vm._v(" "),_c("builder-block",{attrs:{"page-id":_vm.pageId,"page-uid":_vm.pageUid,"encoded-page-id":_vm.encodedPageId,"endpoints":_vm.endpoints,"value":blockValue,"label":_vm.extendedBlockConfigs[blockValue._key].label||_vm.extendedBlockConfigs[blockValue._key].name,"blockConfig":_vm.extendedBlockConfigs[blockValue._key],"fieldGroup":_vm.extendedBlockConfigs[blockValue._key],"index":index,"columns-count":_vm.columnsCount,"styles":_vm.cssContents[blockValue._key],"script":_vm.jsContents[blockValue._key],"parentPath":_vm.path,"canDuplicate":!_vm.max||_vm.blockCount<_vm.max,"cssContent":_vm.extendedBlockConfigs[blockValue._key].preview&&_vm.cssContents[_vm.extendedBlockConfigs[blockValue._key].preview.css]?_vm.cssContents[_vm.extendedBlockConfigs[blockValue._key].preview.css]:"","cssContents":_vm.cssContents},on:{"input":_vm.onBlockInput,"clone":_vm.cloneBlock,"delete":_vm.deleteBlock,"transformed":function($event){return _vm.updateValue(index,$event)}}}),_vm._v(" "),_vm.columnsCount%index==0&&_vm.columnsCount>1&&(!_vm.max||_vm.blockCount<_vm.max)?_c("div",{staticClass:"kBuilder__inlineAddButton kBuilder__inlineAddButton--after kBuilder__inlineAddButton--vertical",on:{"click":function($event){return _vm.onClickAddBlock(index+1)}}}):_vm._e()],1):_vm._e()}),_vm._v(" "),!_vm.max||_vm.blockCount<_vm.max?_c("k-column",{attrs:{"width":_vm.columnWidth}},[_c("k-button",{staticClass:"kBuilder__addButton",attrs:{"icon":"add"},on:{"click":function($event){return _vm.onClickAddBlock()}}},[_vm._v(_vm._s(_vm.addBlockButtonLabel))])],1):_vm._e()],2),_vm._v(" "),_c("k-dialog",{ref:"dialog",staticClass:"kBuilder__dialog",on:{"open":_vm.onOpenDialog,"close":_vm.onCloseDialog}},[_c("k-items",{attrs:{"items":_vm.items},on:{"item":_vm.addBlockClicked}},[_c("template",{slot:"options"},[_c("k-icon",{staticClass:"kBuilder__addBlockButtonIcon",attrs:{"type":"add"}})],1)],2)],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("timoetting/k-builder",{fields:{builder:Sa}});})();